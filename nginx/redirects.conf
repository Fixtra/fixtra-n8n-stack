# nginx/redirects.conf - OLD domain redirects
# REDIRECT: wizardengine.fixtra.io → dev.n8n.fixtra.io
server {
    listen 443 ssl http2;
    server_name wizardengine.fixtra.io;

    # Keep existing SSL certificate for redirect
    ssl_certificate /etc/letsencrypt/live/wizardengine.fixtra.io/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/wizardengine.fixtra.io/privkey.pem;

    # Permanent redirect to new domain
    return 301 https://dev.n8n.fixtra.io$request_uri;
}

# HTTP redirect for old main domain
server {
    listen 80;
    server_name wizardengine.fixtra.io;
    return 301 https://dev.n8n.fixtra.io$request_uri;
}

# REDIRECT: langfuse.wizardengine.fixtra.io → dev.langfuse.fixtra.io
server {
    listen 443 ssl http2;
    server_name langfuse.wizardengine.fixtra.io;

    # Keep existing SSL certificate for redirect
    ssl_certificate /etc/letsencrypt/live/wizardengine.fixtra.io/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/wizardengine.fixtra.io/privkey.pem;

    # Permanent redirect to new domain
    return 301 https://dev.langfuse.fixtra.io$request_uri;
}

# HTTP redirect for old langfuse subdomain
server {
    listen 80;
    server_name langfuse.wizardengine.fixtra.io;
    return 301 https://dev.langfuse.fixtra.io$request_uri;
}
